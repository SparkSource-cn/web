---
layout: page
title: 智能驾舱 HMI 开发面临的挑战和 SparkSource 的解决方案
description: Challenges from SDC development and the solusion from SparkSource.
---


无论是软件定义汽车，还是数据定义汽车，抑或是服务定义汽车，最终的汽车是要给人用
的——需要有人机交互界面，也就是 HMI。无论是独立的信息娱乐系统加仪表信息系统，还是
整合在一起的智能驾舱系统，应用设计的开发总是围绕 HMI 展开的。从务实的角度来看，
数码相机替代传统机械相机是易用人机界面的更新换代；智能手机代替功能手机也是易用人
机界面的更新换代；智能汽车代替传统汽车也将是易用性人车交互系统的更新换代。所以，
HMI 的开发实际上推动着底层技术的创新。

然而，智能驾舱系统非常复杂庞大，其人机交互的开发面临许多挑战。

* 多屏互动

智能驾舱和手机不同。手机通常只有一块屏幕，没有多屏互动的问题。智能驾舱通常都是四
块屏起步：

1. 仪表屏幕：驾驶信息和娱乐信息

2. 信息娱乐屏幕：导航、娱乐、社交、通讯等信息

3. 抬头显示（HUD）屏幕:关键驾驶信息

4. 辅助控制屏幕：辅助信息

5. 后座娱乐信息屏幕：后排乘客使用的娱乐、通讯、游戏、社交等信息

这些屏幕有的是由同一个操作系统控制，有的是由不同的操作系统控制。各个屏幕之间的信
息需要同步，还需要支持不同屏幕之间的信息流畅转移——比如实现用手势在屏幕间挪动应用。
在传统的 HMI 开发框架，比如 QT，比如 Android Studio，多屏互动都不是原生支持，需
要深度定制，而且性能难以保证。

SparkSource 原生支持单系统的多屏互动应用。在 SparkSource 中，多个屏幕实际上一个
大屏幕的多个部分，在其中移动、复制和粘贴应用就像操作一个屏幕那么简单。如果屏幕属
于多个操作系统，SparkEngine 可以运行在不同的操作系统之下，各个 SparkEngine 之间
的通讯对接非常简单高效——无需传输大量视觉数据就可实现视觉效果同步。

* 主题热切换

目前车内应用支持的主题切换大多数只能切换语言、颜色和背景，有的还需要重新启动系统
才能完成。这对用户的体验都是有负面影响的。其原因在于目前的 HMI 设计系统无法充分
实现视觉元素和数据逻辑的隔离。

在 Sparksource 之下，HMI 的视觉效果、布局、语言，甚至是各个控件的动效和声音效果
都是置于视觉元素的框架之下的，它们和 HMI 的交互逻辑是充分隔离的。因此，主题热切
换可以做到整个页面的布局热切换，整个主题色调的热切换，整个系统语言的热切换，乃至
各个控件的视觉表现独立热切换。切换过程无需重启系统，用户无需等待。

举个例子，我们的一个解决方案是为客户定制云端多套主题的热切换。车机端开发好之后，
客户提供多套主题资源部署到云端网络。车极端无需升级系统，直接从云端读取资源进行热
切换，效果和本地存储一致。

另外，SparkSource 的 HTML 控件支持多种 WebKit 架构，能够独立显示客户推送的 HMTL5
程序和页面，充分复用了客户已有的资源。

* 动效表现力

车内的屏幕越来越大，分辨率也越来越高。这个对 HMI 的视觉表现，尤其是动画表现提出
了更高的要求。

目前，其他的 HMI 开发工具，比如 KANZI，可以使用 Shader 做出比较好的动画效果。但
是，其应用局限于仪表；开发环境也局限于 Windows。对智能驾舱这样的复杂交互系统，
KANZI 还需要大量的定制开发投入，没有通用架构。

SparkSource 原生支持 Shader 程序。原先开发好的 Shader 程序在 SparkSource 下可以
直接使用，动画渲染效果不会有缩水。而且，SparkSource 支持 2D/3D 混合的界面设计，
大至整个界面，小至一个 3D 元素的一个表面都可以进行特别的动画处理。这样就可以使应
用设计和视觉设计发挥最大的想象力来表现用户的需求。

* 协同开发

传统的应用开发，特别是 HMI 的开发，都是要等到底层、中间件、UI/UX 等元素都到位之
后才能开始，而且每次集成都需要全量编译联调。这导致问题堆积，质量不可控，对项目周
期有很大的影响。

SparkSource 使用标准模块充分隔离应用层和中间层，并构建了 Spark Simulator 使应用
层和中间层自我形成闭环——能够互不依赖地独立开发和测试。这一架构解决了全量编译和测
试互相依赖的问题，应用可以和 UI/UX 一起在项目早期就进入开发，和底层模块及服务并
行开展。最后的集成测试无需联合编译，可以各自编译，一起测试。实现了系统各组件的协
同开发和应用的单独差分升级。

软件定义汽车是一个新的汽车软件时代，无论是 OEM，还是 Tier-1、Tier-2，转变思想是
第一要务。但是，思想转变还远远不够，开发理念和开发工具也要转变——不要以为自己在传
统汽车软件开发中使用的工具链还能够继续在新的环境下发挥余热。尽快采用适应新理念的
开发工具能够避免很多不必要的弯路，并引领应用创新的潮流。SparkSource 正是配合这样
的新趋势诞生的国内完全自主可控的优秀应用开发工具。
